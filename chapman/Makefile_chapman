# Set here the desired C compiler and its optimization options
CC   = gcc
COPT = -O -Wall  

# To create Matlab gateway routines
# Note: use $(CC) as the mex C compiler
MEX  = mex

HEADERS = chapman_Global.h  chapman_Parameters.h  chapman_Sparse.h

SPSRC = chapman_JacobianSP.c \
	chapman_HessianSP.c  \
	chapman_StoichiomSP.c

SPOBJ = chapman_JacobianSP.o \
	chapman_HessianSP.o  \
	chapman_StoichiomSP.o


SRC =   chapman_Main.c      chapman_Integrator.c   \
	chapman_Function.c  chapman_Initialize.c   \
	chapman_Jacobian.c  chapman_LinearAlgebra.c\
	chapman_Rates.c     chapman_Hessian.c      \
	chapman_Stoichiom.c chapman_Util.c         \
	chapman_Monitor.c

OBJ =   chapman_Main.o      chapman_Integrator.o   \
	chapman_Function.o  chapman_Initialize.o   \
	chapman_Jacobian.o  chapman_LinearAlgebra.o\
	chapman_Rates.o     chapman_Hessian.o      \
	chapman_Stoichiom.o chapman_Util.o         \
	chapman_Monitor.o

STOCHSRC = chapman_Stochastic.c 
STOCHOBJ = chapman_Stochastic.o 

all:    exe

exe:	$(HEADERS) $(SPOBJ) $(OBJ)
	$(CC) $(COPT) $(SPOBJ) $(OBJ) -lm -o chapman.exe	

stochastic:$(HEADERS) $(SPOBJ) $(OBJ) $(STOCHOBJ)
	$(CC) $(COPT) $(SPOBJ) $(OBJ) $(STOCHOBJ) -lm \
	-o chapman_stochastic.exe	

mex:    $(HEADERS) $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O chapman_mex_Fun.c     -lm $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O chapman_mex_Jac_SP.c  -lm $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O chapman_mex_Hessian.c -lm $(SPOBJ) $(OBJ)


clean:
	rm -f $(SPOBJ) $(OBJ) chapman.exe chapman_*.mexglx chapman*.dat

distclean:
	rm -f $(SPOBJ) $(OBJ) chapman.exe chapman*.dat \
	chapman_*.c chapman_*.h chapman_*.map chapman_*.mexglx

chapman_Monitor.o: chapman_Monitor.c $(HEADERS)
	$(CC) $(COPT) -c $<

chapman_JacobianSP.o: chapman_JacobianSP.c $(HEADERS)
	$(CC) $(COPT) -c $<

chapman_HessianSP.o: chapman_HessianSP.c  $(HEADERS)
	$(CC) $(COPT) -c $<

chapman_StoichiomSP.o: chapman_StoichiomSP.c $(HEADERS)
	$(CC) $(COPT) -c $<

chapman_Main.o: chapman_Main.c chapman_Initialize.o $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Integrator.o: chapman_Integrator.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Initialize.o: chapman_Initialize.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Function.o: chapman_Function.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Stochastic.o: chapman_Stochastic.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Jacobian.o: chapman_Jacobian.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_LinearAlgebra.o: chapman_LinearAlgebra.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Rates.o: chapman_Rates.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Hessian.o:  chapman_Hessian.c $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Stoichiom.o: chapman_Stoichiom.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

chapman_Util.o: chapman_Util.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

