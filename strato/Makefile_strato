# Set here the desired C compiler and its optimization options
CC   = gcc
COPT = -O -Wall  

# To create Matlab gateway routines
# Note: use $(CC) as the mex C compiler
MEX  = mex

HEADERS = strato_Global.h  strato_Parameters.h  strato_Sparse.h

SPSRC = strato_JacobianSP.c \
	strato_HessianSP.c  \
	strato_StoichiomSP.c

SPOBJ = strato_JacobianSP.o \
	strato_HessianSP.o  \
	strato_StoichiomSP.o


SRC =   strato_Main.c      strato_Integrator.c   \
	strato_Function.c  strato_Initialize.c   \
	strato_Jacobian.c  strato_LinearAlgebra.c\
	strato_Rates.c     strato_Hessian.c      \
	strato_Stoichiom.c strato_Util.c         \
	strato_Monitor.c

OBJ =   strato_Main.o      strato_Integrator.o   \
	strato_Function.o  strato_Initialize.o   \
	strato_Jacobian.o  strato_LinearAlgebra.o\
	strato_Rates.o     strato_Hessian.o      \
	strato_Stoichiom.o strato_Util.o         \
	strato_Monitor.o

STOCHSRC = strato_Stochastic.c 
STOCHOBJ = strato_Stochastic.o 

all:    exe

exe:	$(HEADERS) $(SPOBJ) $(OBJ)
	$(CC) $(COPT) $(SPOBJ) $(OBJ) -lm -o strato.exe	

stochastic:$(HEADERS) $(SPOBJ) $(OBJ) $(STOCHOBJ)
	$(CC) $(COPT) $(SPOBJ) $(OBJ) $(STOCHOBJ) -lm \
	-o strato_stochastic.exe	

mex:    $(HEADERS) $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O strato_mex_Fun.c     -lm $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O strato_mex_Jac_SP.c  -lm $(SPOBJ) $(OBJ)
	$(MEX) CC#$(CC) -O strato_mex_Hessian.c -lm $(SPOBJ) $(OBJ)


clean:
	rm -f $(SPOBJ) $(OBJ) strato.exe strato_*.mexglx strato*.dat

distclean:
	rm -f $(SPOBJ) $(OBJ) strato.exe strato*.dat \
	strato_*.c strato_*.h strato_*.map strato_*.mexglx

strato_Monitor.o: strato_Monitor.c $(HEADERS)
	$(CC) $(COPT) -c $<

strato_JacobianSP.o: strato_JacobianSP.c $(HEADERS)
	$(CC) $(COPT) -c $<

strato_HessianSP.o: strato_HessianSP.c  $(HEADERS)
	$(CC) $(COPT) -c $<

strato_StoichiomSP.o: strato_StoichiomSP.c $(HEADERS)
	$(CC) $(COPT) -c $<

strato_Main.o: strato_Main.c strato_Initialize.o $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Integrator.o: strato_Integrator.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Initialize.o: strato_Initialize.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Function.o: strato_Function.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Stochastic.o: strato_Stochastic.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Jacobian.o: strato_Jacobian.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_LinearAlgebra.o: strato_LinearAlgebra.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Rates.o: strato_Rates.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Hessian.o:  strato_Hessian.c $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Stoichiom.o: strato_Stoichiom.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

strato_Util.o: strato_Util.c  $(HEADERS) $(SPOBJ)
	$(CC) $(COPT) -c $<

